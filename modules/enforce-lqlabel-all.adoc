:_module-type: PROCEDURE

[id="enforce-lqlabel-all_{context}"]
= Enforcing the local-queue labeling policy in all projects

[role='_abstract']
The local-queue labeling policy is enforced in all projects by default.

If the original `ValidatingAdmissionPolicyBinding` resource is edited, you can follow these steps to restore the default values.

.Prerequisites
ifdef::upstream,self-managed[]
* You have logged in to {openshift-platform} with the `cluster-admin` role.
endif::[]
ifdef::cloud-service[]
* You have logged in to OpenShift with the `cluster-admin` role.
endif::[]


ifdef::upstream[]
* You have installed the required distributed workloads components as described in link:{odhdocshome}/installing-open-data-hub/#installing-the-distributed-workloads-components_install[Installing the distributed workloads components].
endif::[]


ifdef::self-managed[]
* You have installed the required distributed workloads components as described in link:{rhoaidocshome}{default-format-url}/installing_and_uninstalling_{url-productname-short}/installing-the-distributed-workloads-components_install[Installing the distributed workloads components] (for disconnected environments, see link:{rhoaidocshome}{default-format-url}/installing_and_uninstalling_{url-productname-short}_in_a_disconnected_environment/installing-the-distributed-workloads-components_install[Installing the distributed workloads components]).
endif::[]

ifdef::cloud-service[]
* You have installed the required distributed workloads components as described in link:{rhoaidocshome}{default-format-url}/installing_and_uninstalling_{url-productname-short}/installing-the-distributed-workloads-components_install[Installing the distributed workloads components].
endif::[]



.Procedure

. In the {openshift} console, open the *Administrator* perspective,
. From the *Project* list, select *All Projects*.
. Click *Home* -> *Search*.
. In the *Resources* list, search for *ValidatingAdmissionPolicyBinding*.
. Click the `kueue-validating-admission-policy-binding` entry to open the details page.
. Click the *YAML* tab to show the binding specifications.
. Ensure that the following fields are set to the specified values:
+
.Example to enforce local-queue labeling for all projects
[source,bash,subs="+quotes"]
----
kind: ValidatingAdmissionPolicyBinding
apiVersion: admissionregistration.k8s.io/v1
metadata:
  name: kueue-validating-admission-policy-binding
  uid: _<Populated by the system. Read-only.>_
  resourceVersion: _<Populated by the system. Read-only.>_
  generation: _<Populated by the system. Read-only.>_
  creationTimestamp: _<Populated by the system. Read-only.>_
  labels:
    app.kubernetes.io/component: controller
    app.kubernetes.io/name: kueue
  managedFields:
spec:
  policyName: kueue-validating-admission-policy
  matchResources:
    namespaceSelector: {}
    objectSelector: {}
    matchPolicy: Equivalent
  validationActions:
    - Deny
----

. If you made any changes, click *Save*.

////
.Verification 

Ray clusters cannot be created without specifying a local queue.
You must either specify the local-queue name in the 'local_queue' field in the Ray cluster configuration, or configure a default local queue in the same project.
Otherwise, the Ray cluster creation is rejected by the policy.
////